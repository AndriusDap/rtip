<ion-view view-title="Things to do" align-title="left" class="railtech-things-to-do">
    <ion-content scroll="false">
        <div class="events-column" style="max-width: {{ $ctrl.eventsContainerWidth }}px">
            <div class="col-xs-12 filters-container theme-main-color">
                <div class="col-xs-6 filter-container">
                    <select name="type" 
                            ng-model="$ctrl.typeChosen" 
                            ng-change="$ctrl.updateFilters()">
                        <option ng-repeat="item in $ctrl.types" value="{{ item }}">{{ item }}</option>
                    </select>
                </div>
                <div class="col-xs-6 filter-container">
                    <select name="theme" 
                            ng-model="$ctrl.themeChosen"
                            ng-change="$ctrl.updateFilters()">
                        <option ng-repeat="item in $ctrl.themes" value="{{ item }}">{{ item }}</option>
                    </select>
                </div>
            </div>
            <div class="settings-header col-xs-12">
                <div class="col-xs-12">
                    <div class="col-xs-12 col-md-6 selected-date theme-main-color-light">{{ $ctrl.settings.datetime | date: "EEEE d, MMMM" }}
                        <input mdc-datetime-picker="" 
                                date="true" 
                                time="false" 
                                type="text" 
                                ng-model="$ctrl.settings.datetime" 
                                class="md-input background-input">
                    </div>


                    <div class="col-md-6 location-settings">
                        <div class="col-xs-6 time-container">
                            <span>Travel time:</span> 
                            <br>
                            <span class="selected-time theme-main-color-light">{{ $ctrl.settings.traveltime | date:"H" }}h {{ $ctrl.settings.traveltime | date:"m" }}m </span>
                            <input mdc-datetime-picker="" 
                                date="false" 
                                time="true" 
                                type="text" 
                                ng-model="$ctrl.settings.traveltime" 
                                class="md-input background-input">
                        </div>
                        <div class="col-xs-6 location-container">
                            <span> from: </span>
                            <br>
                            <span class="selected-location theme-main-color-light">{{ $ctrl.settings.location }}</span>
                        </div>
                    </div>
                </div>
                <div id="repeat" ng-repeat="marker in $ctrl.markers | orderBy : 'title'">
                     <button id="country_container" ng-click="$ctrl.openInfoWindow(marker)">
                     <label id="names" class="theme-main-color-link" >{{marker.title}}</label></button>
                </div>
            </div>

            <div class="event-types-divider theme-main-color">
                <div ng-class="{ 'theme-main-color-active': $ctrl.sortingBy === 'time' }" 
                        class="col-xs-4 theme-main-color" 
                        ng-click="$ctrl.sortBy('time')">
                    <i class="icon ion-clock"></i>
                </div>
                <div ng-class="{ 'theme-main-color-active': $ctrl.sortingBy === 'price' }" 
                        class="col-xs-4 theme-main-color" 
                        ng-click="$ctrl.sortBy('price')">
                    <i class="icon ion-social-usd"></i>
                </div>
                <div ng-class="{ 'theme-main-color-active': $ctrl.sortingBy === 'name' }" 
                        class="col-xs-4 theme-main-color" 
                        ng-click="$ctrl.sortBy('name')">
                    A - Z
                </div>
            </div>
            
            <!-- ui-sref="app.thingsToDo.event({ eventId: event.id })"  -->
            
            <ion-content class="events-found col-xs-12" overflow-scroll="true">
                <ion-refresher pulling-text="Pull to refresh" on-refresh="$ctrl.findEvents()"></ion-refresher>
                <ul class="list">
                    <li class="item" 
                                ng-repeat="event in $ctrl.visibleEvents"  
                                ng-click="$ctrl.openInfoWindow(event.marker)">
                        <div class="image-container" style="background-image: url(); background-size: cover;"></div>
                        <div class="event-main-text-container col-xs-8">
                            <a ui-sref="app.thingsToDo.event({ eventId: event.event.id })" class="event-name theme-main-color-link">
                                {{ event.event.name }}
                            </a>
                            <div class="event-location">
                                <i class="icon ion-ios-location"></i>
                                <span>{{ event.event.location }}</span>
                            </div>
                        </div>
                        <div class="event-cost">
                            Â£ {{ event.event.price | number:0 }}
                        </div>
                        <div class="event-travel-time">
                            {{ event.route.time / 60 | number:0 }} minutes
                        </div>
                        <br><br>
                        <div>
                            {{ event.event.type }}
                        </div>
                        <br><br>
                        <div>
                            {{ event.event.theme }}
                        </div>

                    </li>
                    <li class="item last-item-padding show-xs hide"></li>
                </ul>

            </ion-content>
        </div>
    </div>

    <div class="map-container hide-xs sm-show" ng-style="{ width: $ctrl.mapWidth + 'px' }">
        <div id="map"></div>
    </div> 

    </ion-content>
</ion-view>

